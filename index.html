<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GasSwap ‚Äì BSC ‚áÑ TRX Cross‚ÄëSwap</title>
  <meta name="description" content="Simple cross-chain swap request UI for BSC‚ÜíTRX (others coming soon)." />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- QRCode.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    /* Hide number spinners on mobile for better look on address inputs */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button{ -webkit-appearance: none; margin:0 }
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-slate-100">
  <header class="border-b border-slate-800 bg-slate-900/60 backdrop-blur sticky top-0 z-20">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 rounded-xl bg-gradient-to-tr from-emerald-400 to-cyan-400"></div>
        <h1 class="text-lg font-semibold tracking-tight">GasSwap</h1>
        <span class="ml-2 text-xs text-slate-400">v0.1 ‚Äì Static UI</span>
      </div>
      <div class="flex items-center gap-3">
        <select id="langSelect" class="bg-slate-800 text-slate-100 text-sm rounded-xl px-3 py-2 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-emerald-400">
          <option value="auto">üåê Auto</option>
          <option value="en">English</option>
          <option value="ko">ÌïúÍµ≠Ïñ¥</option>
          <option value="ja">Êó•Êú¨Ë™û</option>
          <option value="zh">‰∏≠Êñá</option>
          <option value="es">Espa√±ol</option>
        </select>
        <a id="repoLink" href="#" class="text-xs text-slate-400 hover:text-slate-200 underline hidden">GitHub</a>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-8">
    <!-- Intro / Notice -->
    <section class="mb-6">
      <div class="rounded-2xl border border-slate-800 bg-slate-900 p-5">
        <h2 id="title" class="text-2xl font-semibold mb-2">BSC ‚Üí TRX Cross‚ÄëSwap</h2>
        <p id="subtitle" class="text-slate-400 text-sm leading-relaxed">
          Submit sender/receiver wallets to generate a deposit session. Other routes are visible but disabled until launch.
        </p>
      </div>
    </section>

    <!-- Route Tabs -->
    <nav class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 mb-6">
      <button data-route="bsc-trx" class="route-tab active rounded-xl px-3 py-2 border border-emerald-500/50 bg-emerald-500/10 text-emerald-200">BSC ‚Üí TRX</button>
      <button data-route="trx-bsc" class="route-tab disabled rounded-xl px-3 py-2 border border-slate-800 bg-slate-900/60 text-slate-500 cursor-not-allowed">TRX ‚Üí BSC</button>
      <button data-route="bsc-eth" class="route-tab disabled rounded-xl px-3 py-2 border border-slate-800 bg-slate-900/60 text-slate-500 cursor-not-allowed">BSC ‚Üí ETH</button>
      <button data-route="eth-bsc" class="route-tab disabled rounded-xl px-3 py-2 border border-slate-800 bg-slate-900/60 text-slate-500 cursor-not-allowed">ETH ‚Üí BSC</button>
      <button data-route="eth-trx" class="route-tab disabled rounded-xl px-3 py-2 border border-slate-800 bg-slate-900/60 text-slate-500 cursor-not-allowed">ETH ‚Üí TRX</button>
      <button data-route="trx-eth" class="route-tab disabled rounded-xl px-3 py-2 border border-slate-800 bg-slate-900/60 text-slate-500 cursor-not-allowed">TRX ‚Üí ETH</button>
    </nav>

    <!-- Form + Result -->
    <section class="grid md:grid-cols-2 gap-6">
      <!-- Left: Form -->
      <div class="rounded-2xl border border-slate-800 bg-slate-900 p-5">
        <h3 id="formTitle" class="text-lg font-semibold mb-4">Create deposit session</h3>
        <form id="swapForm" class="space-y-4" novalidate>
          <div>
            <label for="sender" id="labelSender" class="block text-sm text-slate-300 mb-1">Sender (BSC)</label>
            <input id="sender" name="sender" type="text" inputmode="text" autocomplete="off"
                   class="w-full rounded-xl bg-slate-950 border border-slate-800 focus:border-emerald-400 focus:ring-emerald-400 px-4 py-3 text-sm"
                   placeholder="0x‚Ä¶ (BSC/EVM address)" required />
            <p id="senderHelp" class="text-xs text-slate-500 mt-1">Must be a checksummed EVM address (0x‚Ä¶40 hex chars).</p>
          </div>
          <div>
            <label for="receiver" id="labelReceiver" class="block text-sm text-slate-300 mb-1">Receiver (TRX)</label>
            <input id="receiver" name="receiver" type="text" inputmode="text" autocomplete="off"
                   class="w-full rounded-xl bg-slate-950 border border-slate-800 focus:border-emerald-400 focus:ring-emerald-400 px-4 py-3 text-sm"
                   placeholder="T‚Ä¶ (TRON base58 address)" required />
            <p id="receiverHelp" class="text-xs text-slate-500 mt-1">Should start with T and be 34 chars (base58).</p>
          </div>

          <div id="formError" class="hidden rounded-xl border border-red-500/40 bg-red-500/10 text-red-200 text-sm px-3 py-2"></div>

          <button id="startBtn" type="submit"
                  class="w-full rounded-xl px-4 py-3 bg-emerald-500 text-slate-950 font-semibold hover:bg-emerald-400 focus:outline-none">
            <span id="startBtnText">Start Swap</span>
          </button>
        </form>

        <!-- Explorers for user-provided addresses -->
        <div id="userExplorers" class="hidden mt-5 space-y-2">
          <div class="text-sm text-slate-400" id="youCanCheck">You can check these on the explorers:</div>
          <div class="flex flex-col gap-2 text-sm">
            <a id="userBscLink" target="_blank" rel="noopener" class="underline hover:text-emerald-300"></a>
            <a id="userTrxLink" target="_blank" rel="noopener" class="underline hover:text-emerald-300"></a>
          </div>
        </div>
      </div>

      <!-- Right: Session panel -->
      <div class="rounded-2xl border border-slate-800 bg-slate-900 p-5">
        <h3 id="sessionTitle" class="text-lg font-semibold mb-4">Deposit session</h3>

        <div id="inactiveHint" class="text-sm text-slate-400">
          Fill the form and press <span class="font-semibold">Start Swap</span> to generate your session.
        </div>

        <div id="sessionPanel" class="hidden space-y-4">
          <div>
            <div class="text-xs text-slate-400" id="depositTo">Deposit to (fixed address)</div>
            <div class="mt-1 flex items-center gap-2">
              <code id="depositAddress" class="text-emerald-200 break-all"></code>
              <button id="copyDeposit" class="text-xs px-2 py-1 rounded-lg border border-slate-700 hover:bg-slate-800">Copy</button>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4 items-start">
            <div>
              <div id="qr" class="rounded-xl bg-white p-2 inline-block"></div>
              <div class="text-[10px] text-slate-500 mt-1" id="qrHint">Scan to deposit</div>
            </div>
            <div>
              <div class="text-xs text-slate-400" id="deadlineLabel">Deposit deadline</div>
              <div id="countdown" class="text-3xl font-mono mt-1">01:00:00</div>
              <div id="expireNote" class="text-xs text-slate-500 mt-2">If the timer expires, the session may be invalidated.</div>
            </div>
          </div>

          <div class="space-y-2">
            <div class="text-sm text-slate-400" id="serverCheck">Server wallet explorers:</div>
            <div class="flex flex-col gap-2 text-sm">
              <a id="serverBscLink" target="_blank" rel="noopener" class="underline hover:text-emerald-300"></a>
              <a id="serverTrxLink" target="_blank" rel="noopener" class="underline hover:text-emerald-300"></a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Persistent Footer Explorers -->
    <section class="mt-8">
      <div class="rounded-2xl border border-slate-800 bg-slate-900 p-5">
        <div class="text-sm text-slate-300 mb-2" id="footerTitle">üì° Server Wallets (always visible)</div>
        <div class="grid sm:grid-cols-2 gap-2 text-sm">
          <a id="footerBsc" target="_blank" rel="noopener" class="underline hover:text-emerald-300"></a>
          <a id="footerTrx" target="_blank" rel="noopener" class="underline hover:text-emerald-300"></a>
        </div>
      </div>
    </section>

    <!-- Small print -->
    <section class="mt-4 text-xs text-slate-500 leading-relaxed">
      <p id="legal1">This page is a static UI prototype. No wallets are connected here. Always verify addresses and transactions on-chain.</p>
      <p id="legal2">For language: automatic detection uses your browser locale; you can override it via the selector.</p>
    </section>
  </main>

  <footer class="mt-10 py-10 text-center text-xs text-slate-500">
    ¬© <span id="year"></span> GasSwap. All rights reserved.
  </footer>

  <script>
    // ====== CONFIG (edit these before deploying) ======
    const CONFIG = {
      SERVER_WALLETS: {
        BSC: "0xDA1E8b362DDe013EA87Cf8984D64490c1900d231",   // fixed deposit address for BSC side
        TRX: "TMq11111111111111111111111111111111",         // your Tron server wallet
        ETH: "0x1111111111111111111111111111111111111111"    // optional future use
      },
      REPO_URL: "", // e.g., https://github.com/you/gasswap
      SESSION_SECONDS: 3600
    };

    // ====== i18n strings ======
    const I18N = {
      en: {
        title: "BSC ‚Üí TRX Cross‚ÄëSwap",
        subtitle: "Submit sender/receiver wallets to generate a deposit session. Other routes are visible but disabled until launch.",
        formTitle: "Create deposit session",
        sender: "Sender (BSC)", receiver: "Receiver (TRX)",
        senderHelp: "Must be a valid EVM address (0x‚Ä¶40 hex chars).",
        receiverHelp: "Should start with T and be 34 chars (base58).",
        start: "Start Swap",
        err_sender: "Invalid BSC (EVM) address.",
        err_receiver: "Invalid TRON address.",
        youCanCheck: "You can check these on the explorers:",
        sessionTitle: "Deposit session",
        inactiveHint: "Fill the form and press Start Swap to generate your session.",
        depositTo: "Deposit to (fixed address)",
        copy: "Copy",
        qrHint: "Scan to deposit",
        deadline: "Deposit deadline",
        expireNote: "If the timer expires, the session may be invalidated.",
        serverCheck: "Server wallet explorers:",
        footerTitle: "üì° Server Wallets (always visible)",
        legal1: "This page is a static UI prototype. No wallets are connected here. Always verify addresses and transactions on-chain.",
        legal2: "Language auto-detection uses your browser locale; override via selector.",
        bscSenderLink: "Sender on BscScan",
        trxReceiverLink: "Receiver on TRONSCAN",
        bscServerLink: "Server wallet on BscScan",
        trxServerLink: "Server wallet on TRONSCAN",
      },
      ko: {
        title: "BSC ‚Üí TRX ÌÅ¨Î°úÏä§Ïä§Ïôë",
        subtitle: "Î≥¥ÎÇ¥Îäî/Î∞õÎäî ÏßÄÍ∞ë Ï£ºÏÜåÎ•º Ï†úÏ∂úÌïòÎ©¥ ÏûÖÍ∏à ÏÑ∏ÏÖòÏù¥ ÏÉùÏÑ±Îê©ÎãàÎã§. Îã§Î•∏ Î£®Ìä∏Îäî ÌëúÏãúÎßå ÎêòÍ≥† Ï∂úÏãú Ï†ÑÍπåÏßÄ ÎπÑÌôúÏÑ±ÌôîÎê©ÎãàÎã§.",
        formTitle: "ÏûÖÍ∏à ÏÑ∏ÏÖò ÎßåÎì§Í∏∞",
        sender: "Î≥¥ÎÇ¥Îäî ÏßÄÍ∞ë (BSC)", receiver: "Î∞õÎäî ÏßÄÍ∞ë (TRX)",
        senderHelp: "0xÎ°ú ÏãúÏûëÌïòÎäî 40ÏûêÎ¶¨ 16ÏßÑÏàò(EVM) Ï£ºÏÜåÏó¨Ïïº Ìï©ÎãàÎã§.",
        receiverHelp: "TÎ°ú ÏãúÏûëÌïòÎäî 34ÏûêÎ¶¨(base58) Ï£ºÏÜåÏó¨Ïïº Ìï©ÎãàÎã§.",
        start: "Ïä§Ïôë ÏãúÏûëÌïòÍ∏∞",
        err_sender: "BSC(EVM) Ï£ºÏÜå ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.",
        err_receiver: "TRON Ï£ºÏÜå ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.",
        youCanCheck: "ÌÉêÏÉâÍ∏∞ÏóêÏÑú ÏßÅÏ†ë ÌôïÏù∏ÌïòÏÑ∏Ïöî:",
        sessionTitle: "ÏûÖÍ∏à ÏÑ∏ÏÖò",
        inactiveHint: "ÌèºÏùÑ Ï±ÑÏö∞Í≥† ‚ÄòÏä§Ïôë ÏãúÏûëÌïòÍ∏∞‚ÄôÎ•º ÎàÑÎ•¥Î©¥ ÏÑ∏ÏÖòÏù¥ ÏÉùÏÑ±Îê©ÎãàÎã§.",
        depositTo: "ÏûÖÍ∏à Ï£ºÏÜå (Í≥†Ï†ï)",
        copy: "Î≥µÏÇ¨",
        qrHint: "QRÎ°ú ÏûÖÍ∏à",
        deadline: "ÏûÖÍ∏à ÏãúÌïú",
        expireNote: "ÏãúÌïúÏù¥ ÏßÄÎÇòÎ©¥ ÏÑ∏ÏÖòÏù¥ Î¨¥Ìö® Ï≤òÎ¶¨Îê† Ïàò ÏûàÏäµÎãàÎã§.",
        serverCheck: "ÏÑúÎ≤Ñ ÏßÄÍ∞ë ÌÉêÏÉâÍ∏∞:",
        footerTitle: "üì° ÏÑúÎ≤Ñ ÏßÄÍ∞ë (Ìï≠ÏÉÅ ÌëúÏãú)",
        legal1: "Ïù¥ ÌéòÏù¥ÏßÄÎäî Ï†ïÏ†Å UI ÏãúÏ†úÌíàÏûÖÎãàÎã§. ÏßÄÍ∞ë Ïó∞Í≤∞ÏùÄ ÏóÜÏäµÎãàÎã§. Î∞òÎìúÏãú Ïò®Ï≤¥Ïù∏ÏúºÎ°ú Ï£ºÏÜåÏôÄ Ìä∏ÎûúÏû≠ÏÖòÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî.",
        legal2: "ÏûêÎèô Ïñ∏Ïñ¥ ÏÑ§Ï†ïÏùÄ Î∏åÎùºÏö∞Ï†Ä Î°úÏ∫òÏùÑ ÏÇ¨Ïö©ÌïòÎ©∞ ÎìúÎ°≠Îã§Ïö¥ÏúºÎ°ú Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏäµÎãàÎã§.",
        bscSenderLink: "Î≥¥ÎÇ¥Îäî ÏßÄÍ∞ë ‚Äì BscScan",
        trxReceiverLink: "Î∞õÎäî ÏßÄÍ∞ë ‚Äì TRONSCAN",
        bscServerLink: "ÏÑúÎ≤Ñ ÏßÄÍ∞ë ‚Äì BscScan",
        trxServerLink: "ÏÑúÎ≤Ñ ÏßÄÍ∞ë ‚Äì TRONSCAN",
      },
      ja: {
        title: "BSC ‚Üí TRX „ÇØ„É≠„Çπ„Çπ„ÉØ„ÉÉ„Éó",
        subtitle: "ÈÄÅ‰ø°/Âèó‰ø°„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åô„Çã„Å®ÂÖ•Èáë„Çª„ÉÉ„Ç∑„Éß„É≥„Åå‰ΩúÊàê„Åï„Çå„Åæ„Åô„ÄÇ‰ªñ„É´„Éº„Éà„ÅØË°®Á§∫„ÅÆ„ÅøÔºàÊ∫ñÂÇô‰∏≠Ôºâ„ÄÇ",
        formTitle: "ÂÖ•Èáë„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê",
        sender: "ÈÄÅ‰ø°ÂÖÉ (BSC)", receiver: "Âèó‰ø°ÂÖà (TRX)",
        senderHelp: "0x„ÅßÂßã„Åæ„Çã40Ê°Å„ÅÆEVM„Ç¢„Éâ„É¨„Çπ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ",
        receiverHelp: "T„ÅßÂßã„Åæ„Çã34Ê°ÅÔºàbase58Ôºâ„ÅÆ„Ç¢„Éâ„É¨„Çπ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ",
        start: "„Çπ„ÉØ„ÉÉ„ÉóÈñãÂßã",
        err_sender: "BSC(EVM)„Ç¢„Éâ„É¨„Çπ„ÅåÁÑ°Âäπ„Åß„Åô„ÄÇ",
        err_receiver: "TRON„Ç¢„Éâ„É¨„Çπ„ÅåÁÑ°Âäπ„Åß„Åô„ÄÇ",
        youCanCheck: "„Ç®„ÇØ„Çπ„Éó„É≠„Éº„É©„Éº„ÅßÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô:",
        sessionTitle: "ÂÖ•Èáë„Çª„ÉÉ„Ç∑„Éß„É≥",
        inactiveHint: "„Éï„Ç©„Éº„É†ÂÖ•ÂäõÂæå„Äå„Çπ„ÉØ„ÉÉ„ÉóÈñãÂßã„Äç„Åß„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÁîüÊàê„Åó„Åæ„Åô„ÄÇ",
        depositTo: "ÂÖ•ÈáëÂÖàÔºàÂõ∫ÂÆö„Ç¢„Éâ„É¨„ÇπÔºâ",
        copy: "„Ç≥„Éî„Éº",
        qrHint: "QR„ÅßÂÖ•Èáë",
        deadline: "ÂÖ•ÈáëÊúüÈôê",
        expireNote: "ÊúüÈôêÂàá„Çå„ÅÆÂ†¥Âêà„ÄÅ„Çª„ÉÉ„Ç∑„Éß„É≥„ÅØÁÑ°Âäπ„Å´„Å™„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ",
        serverCheck: "„Çµ„Éº„Éê„Éº„Ç¶„Ç©„É¨„ÉÉ„ÉàÔºà„Ç®„ÇØ„Çπ„Éó„É≠„Éº„É©„ÉºÔºâ:",
        footerTitle: "üì° „Çµ„Éº„Éê„Éº„Ç¶„Ç©„É¨„ÉÉ„ÉàÔºàÂ∏∏ÊôÇË°®Á§∫Ôºâ",
        legal1: "„Åì„ÅÆ„Éö„Éº„Ç∏„ÅØÈùôÁöÑUI„ÅÆË©¶‰ΩúÂìÅ„Åß„Åô„ÄÇ„Ç¶„Ç©„É¨„ÉÉ„ÉàÊé•Á∂ö„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Ç™„É≥„ÉÅ„Çß„Éº„É≥„ÅßÂøÖ„ÅöÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
        legal2: "Ë®ÄË™û„ÅÆËá™ÂãïÂà§ÂÆö„ÅØ„Éñ„É©„Ç¶„Ç∂Ë®≠ÂÆö„ÇíÂà©Áî®„Åó„Åæ„Åô„ÄÇ„Éó„É´„ÉÄ„Ç¶„É≥„ÅßÂ§âÊõ¥ÂèØËÉΩ„ÄÇ",
        bscSenderLink: "ÈÄÅ‰ø°ÂÖÉ ‚Äì BscScan",
        trxReceiverLink: "Âèó‰ø°ÂÖà ‚Äì TRONSCAN",
        bscServerLink: "„Çµ„Éº„Éê„Éº ‚Äì BscScan",
        trxServerLink: "„Çµ„Éº„Éê„Éº ‚Äì TRONSCAN",
      },
      zh: {
        title: "BSC ‚Üí TRX Ë∑®ÈìæÂÖëÊç¢",
        subtitle: "Êèê‰∫§ÂèëÈÄÅ/Êé•Êî∂Âú∞ÂùÄ‰ª•ÁîüÊàêÂÖ•Èáë‰ºöËØù„ÄÇÂÖ∂‰ªñË∑ØÁ∫øÊöÇÊó∂ÊòæÁ§∫‰∏∫ÁÅ∞Ëâ≤ÔºåÂ∞öÊú™ÂºÄÊîæ„ÄÇ",
        formTitle: "ÂàõÂª∫ÂÖ•Èáë‰ºöËØù",
        sender: "ÂèëÈÄÅÂú∞ÂùÄ (BSC)", receiver: "Êé•Êî∂Âú∞ÂùÄ (TRX)",
        senderHelp: "ÂøÖÈ°ª‰∏∫ 0x ÂºÄÂ§¥ÁöÑ 40 ‰ΩçÂçÅÂÖ≠ËøõÂà∂ÔºàEVMÔºâÂú∞ÂùÄ„ÄÇ",
        receiverHelp: "ÂøÖÈ°ª‰ª• T ÂºÄÂ§¥ÔºåÂÖ± 34 ‰ΩçÔºàbase58Ôºâ„ÄÇ",
        start: "ÂºÄÂßãÂÖëÊç¢",
        err_sender: "Êó†ÊïàÁöÑ BSC(EVM) Âú∞ÂùÄ„ÄÇ",
        err_receiver: "Êó†ÊïàÁöÑ TRON Âú∞ÂùÄ„ÄÇ",
        youCanCheck: "ÊÇ®ÂèØÂú®Âå∫ÂùóÊµèËßàÂô®Êü•ÁúãÔºö",
        sessionTitle: "ÂÖ•Èáë‰ºöËØù",
        inactiveHint: "Â°´ÂÜôË°®ÂçïÂπ∂ÁÇπÂáª‚ÄúÂºÄÂßãÂÖëÊç¢‚Äù‰ª•ÁîüÊàê‰ºöËØù„ÄÇ",
        depositTo: "ÂÖ•ÈáëÂú∞ÂùÄÔºàÂõ∫ÂÆöÔºâ",
        copy: "Â§çÂà∂",
        qrHint: "Êâ´Á†ÅÂÖ•Èáë",
        deadline: "ÂÖ•ÈáëÊà™Ê≠¢Êó∂Èó¥",
        expireNote: "Ë∂ÖÊó∂Âêé‰ºöËØùÂèØËÉΩÂ§±Êïà„ÄÇ",
        serverCheck: "ÊúçÂä°Âô®Èí±ÂåÖÔºàÂå∫ÂùóÊµèËßàÂô®ÔºâÔºö",
        footerTitle: "üì° ÊúçÂä°Âô®Èí±ÂåÖÔºàÂßãÁªàÊòæÁ§∫Ôºâ",
        legal1: "Êú¨È°µÈù¢‰∏∫ÈùôÊÄÅ UI ÂéüÂûãÔºåÊú™ËøûÊé•Èí±ÂåÖ„ÄÇËØ∑Âä°ÂøÖÂú®Èìæ‰∏äÊ†∏ÂØπÂú∞ÂùÄÂíå‰∫§Êòì„ÄÇ",
        legal2: "Ëá™Âä®ËØ≠Ë®ÄÂü∫‰∫éÊµèËßàÂô®ËØ≠Ë®ÄÔºõÂèØÊâãÂä®ÂàáÊç¢„ÄÇ",
        bscSenderLink: "ÂèëÈÄÅÂú∞ÂùÄ ‚Äì BscScan",
        trxReceiverLink: "Êé•Êî∂Âú∞ÂùÄ ‚Äì TRONSCAN",
        bscServerLink: "ÊúçÂä°Âô®Èí±ÂåÖ ‚Äì BscScan",
        trxServerLink: "ÊúçÂä°Âô®Èí±ÂåÖ ‚Äì TRONSCAN",
      },
      es: {
        title: "BSC ‚Üí TRX Intercambio cruzado",
        subtitle: "Env√≠a las direcciones de env√≠o/recepci√≥n para generar una sesi√≥n de dep√≥sito. Otras rutas se muestran deshabilitadas por ahora.",
        formTitle: "Crear sesi√≥n de dep√≥sito",
        sender: "Remitente (BSC)", receiver: "Receptor (TRX)",
        senderHelp: "Debe ser una direcci√≥n EVM v√°lida (0x‚Ä¶40 hex).",
        receiverHelp: "Debe comenzar con T y tener 34 caracteres (base58).",
        start: "Iniciar intercambio",
        err_sender: "Direcci√≥n BSC (EVM) inv√°lida.",
        err_receiver: "Direcci√≥n TRON inv√°lida.",
        youCanCheck: "Puedes verificar en los exploradores:",
        sessionTitle: "Sesi√≥n de dep√≥sito",
        inactiveHint: "Completa el formulario y pulsa Iniciar intercambio para generar tu sesi√≥n.",
        depositTo: "Depositar en (direcci√≥n fija)",
        copy: "Copiar",
        qrHint: "Escanea para depositar",
        deadline: "Fecha l√≠mite de dep√≥sito",
        expireNote: "Si el temporizador expira, la sesi√≥n puede invalidarse.",
        serverCheck: "Exploradores del wallet del servidor:",
        footerTitle: "üì° Wallets del servidor (siempre visible)",
        legal1: "Esta p√°gina es un prototipo UI est√°tico. No hay conexi√≥n de wallet. Verifica en cadena siempre.",
        legal2: "La detecci√≥n autom√°tica usa el idioma del navegador; puedes cambiarlo.",
        bscSenderLink: "Remitente en BscScan",
        trxReceiverLink: "Receptor en TRONSCAN",
        bscServerLink: "Wallet del servidor en BscScan",
        trxServerLink: "Wallet del servidor en TRONSCAN",
      }
    };

    const $ = (sel) => document.querySelector(sel);

    // ====== Utility: validators ======
    const isEVM = (addr) => /^0x[0-9a-fA-F]{40}$/.test(addr || "");
    const isTRX = (addr) => /^T[1-9A-HJ-NP-Za-km-z]{33}$/.test(addr || "");

    // ====== Explorer URL builders ======
    const bscAddrURL = (a) => `https://bscscan.com/address/${a}`;
    const tronAddrURL = (a) => `https://tronscan.org/#/address/${a}`;

    // ====== State ======
    let currentLang = "en";
    let countdownTimer = null;

    function setText(id, key) { if($(id)) $(id).textContent = I18N[currentLang][key]; }
    function setLink(id, href, textKey) {
      const el = $(id);
      if(!el) return;
      el.href = href;
      el.textContent = I18N[currentLang][textKey];
    }

    function applyI18n() {
      setText('#title','title');
      setText('#subtitle','subtitle');
      setText('#formTitle','formTitle');
      setText('#labelSender','sender');
      setText('#labelReceiver','receiver');
      setText('#senderHelp','senderHelp');
      setText('#receiverHelp','receiverHelp');
      $('#startBtnText').textContent = I18N[currentLang].start;
      setText('#sessionTitle','sessionTitle');
      setText('#inactiveHint','inactiveHint');
      setText('#depositTo','depositTo');
      setText('#qrHint','qrHint');
      setText('#deadlineLabel','deadline');
      setText('#expireNote','expireNote');
      setText('#serverCheck','serverCheck');
      setText('#footerTitle','footerTitle');
      setText('#legal1','legal1');
      setText('#legal2','legal2');
      setText('#youCanCheck','youCanCheck');
      // Update dynamic links text if already visible
      if(!$('#userExplorers').classList.contains('hidden')) {
        $('#userBscLink').textContent = I18N[currentLang].bscSenderLink;
        $('#userTrxLink').textContent = I18N[currentLang].trxReceiverLink;
      }
      $('#copyDeposit').textContent = I18N[currentLang].copy;
      // Footer links labels
      $('#footerBsc').textContent = I18N[currentLang].bscServerLink;
      $('#footerTrx').textContent = I18N[currentLang].trxServerLink;
    }

    function detectLang() {
      // Using browser locale (static site friendly). Example mapping to our supported set.
      const navLang = (navigator.language || 'en').toLowerCase();
      if(navLang.startsWith('ko')) return 'ko';
      if(navLang.startsWith('ja')) return 'ja';
      if(navLang.startsWith('zh')) return 'zh';
      if(navLang.startsWith('es')) return 'es';
      return 'en';
    }

    function initLanguage() {
      const saved = localStorage.getItem('gasswap_lang');
      currentLang = saved || detectLang();
      // Reflect selector (show Auto only if not set manually)
      const sel = $('#langSelect');
      sel.value = saved ? currentLang : 'auto';
      applyI18n();
      sel.addEventListener('change', () => {
        const val = sel.value;
        if(val === 'auto') {
          localStorage.removeItem('gasswap_lang');
          currentLang = detectLang();
        } else {
          localStorage.setItem('gasswap_lang', val);
          currentLang = val;
        }
        applyI18n();
      });
    }

    function initFooterLinks(){
      const bsc = CONFIG.SERVER_WALLETS.BSC;
      const trx = CONFIG.SERVER_WALLETS.TRX;
      $('#footerBsc').href = bscAddrURL(bsc);
      $('#footerTrx').href = tronAddrURL(trx);
      // Also prefill session panel server links
      $('#serverBscLink').href = bscAddrURL(bsc);
      $('#serverTrxLink').href = tronAddrURL(trx);
      applyI18n();
    }

    function startCountdown(seconds) {
      const el = $('#countdown');
      clearInterval(countdownTimer);
      const end = Date.now() + seconds * 1000;
      const fmt = (n) => String(n).padStart(2,'0');
      function tick(){
        const rem = Math.max(0, Math.floor((end - Date.now())/1000));
        const h = Math.floor(rem/3600), m = Math.floor((rem%3600)/60), s = rem%60;
        el.textContent = `${fmt(h)}:${fmt(m)}:${fmt(s)}`;
        if(rem <= 0) clearInterval(countdownTimer);
      }
      tick();
      countdownTimer = setInterval(tick, 1000);
    }

    function copy(text){
      navigator.clipboard.writeText(text).then(()=>{
        const btn = $('#copyDeposit');
        const original = btn.textContent;
        btn.textContent = '‚úì';
        setTimeout(()=>{ btn.textContent = I18N[currentLang].copy; }, 800);
      });
    }

    function makeQR(text){
      const holder = $('#qr');
      holder.innerHTML = '';
      new QRCode(holder, { text, width: 160, height: 160, correctLevel: QRCode.CorrectLevel.M });
    }

    function showSession(addr){
      $('#inactiveHint').classList.add('hidden');
      $('#sessionPanel').classList.remove('hidden');
      $('#depositAddress').textContent = addr;
      makeQR(addr);
      startCountdown(CONFIG.SESSION_SECONDS);
    }

    function showUserExplorerLinks(sender, receiver){
      $('#userExplorers').classList.remove('hidden');
      const bscURL = bscAddrURL(sender);
      const trxURL = tronAddrURL(receiver);
      const bscText = I18N[currentLang].bscSenderLink;
      const trxText = I18N[currentLang].trxReceiverLink;
      const a1 = $('#userBscLink'); a1.href = bscURL; a1.textContent = bscText;
      const a2 = $('#userTrxLink'); a2.href = trxURL; a2.textContent = trxText;
    }

    function setRouteUI(route){
      // Only BSC->TRX active in this static prototype
      const senderLabel = $('#labelSender');
      const receiverLabel = $('#labelReceiver');
      const senderHelp = $('#senderHelp');
      const receiverHelp = $('#receiverHelp');
      const senderInput = $('#sender');
      const receiverInput = $('#receiver');

      // Default placeholders
      senderInput.value = '';
      receiverInput.value = '';
      $('#formError').classList.add('hidden');
      $('#userExplorers').classList.add('hidden');

      // Visual active tab
      document.querySelectorAll('.route-tab').forEach(b=>{
        b.classList.remove('active');
        if(!b.classList.contains('disabled')) b.classList.remove('border-emerald-500/50','bg-emerald-500/10','text-emerald-200');
      });
      const activeBtn = document.querySelector(`.route-tab[data-route="${route}"]`);
      if(activeBtn){
        activeBtn.classList.add('active','border-emerald-500/50','bg-emerald-500/10','text-emerald-200');
      }

      // Configure form for the chosen route (only one enabled)
      if(route === 'bsc-trx'){
        $('#title').textContent = I18N[currentLang].title;
        senderLabel.textContent = I18N[currentLang].sender; // BSC
        receiverLabel.textContent = I18N[currentLang].receiver; // TRX
        senderHelp.textContent = I18N[currentLang].senderHelp;
        receiverHelp.textContent = I18N[currentLang].receiverHelp;
        senderInput.placeholder = '0x‚Ä¶ (BSC/EVM)';
        receiverInput.placeholder = 'T‚Ä¶ (TRON)';
      } else {
        // Future routes: keep labels but disable submit action
      }
    }

    function initRoutes(){
      document.querySelectorAll('.route-tab').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const route = btn.getAttribute('data-route');
          if(btn.classList.contains('disabled')) return; // disabled ones do nothing
          setRouteUI(route);
        });
      });
      setRouteUI('bsc-trx');
    }

    function initForm(){
      $('#swapForm').addEventListener('submit', (e)=>{
        e.preventDefault();
        const sender = $('#sender').value.trim();
        const receiver = $('#receiver').value.trim();
        const errEl = $('#formError');

        // Validate BSC sender
        if(!isEVM(sender)){
          errEl.textContent = I18N[currentLang].err_sender; errEl.classList.remove('hidden'); return;
        }
        // Validate TRX receiver
        if(!isTRX(receiver)){
          errEl.textContent = I18N[currentLang].err_receiver; errEl.classList.remove('hidden'); return;
        }
        errEl.classList.add('hidden');

        // Show session (fixed BSC deposit address)
        showSession(CONFIG.SERVER_WALLETS.BSC);
        showUserExplorerLinks(sender, receiver);
      });

      $('#copyDeposit').addEventListener('click', ()=> copy($('#depositAddress').textContent));
    }

    function initRepoLink(){
      if(CONFIG.REPO_URL){
        const a = $('#repoLink'); a.href = CONFIG.REPO_URL; a.classList.remove('hidden');
      }
    }

    // Boot
    document.addEventListener('DOMContentLoaded', ()=>{
      $('#year').textContent = new Date().getFullYear();
      initLanguage();
      initRoutes();
      initForm();
      initFooterLinks();
      initRepoLink();
    });
  </script>
</body>
</html>
